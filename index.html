<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css" type="text/css">
</head>

<body>


    <h1>悪魔の実　性格診断</h1>
    <style>
        h1 {
			text-align: center;
			font-size: 70px;
        }
    </style>	
	
	<h3>【あなたの推しキャラ】</h3>
	<div class="select_img">
		<img id="selectedImage" src="" alt="推しキャラを設定画面で選択してね">
	</div>

	<style>
        h1 {
			text-align: center;
        }
    </style>

	<div id="start-screen">

        <p><span style="font-size: 0.8em;">
	
			<img class="btn01" src="../img/設定アイコン.png" alt="設定" onclick="location.href='index2.html'">
			
			大人気テレビアニメ「ワンピース」の作中には、「悪魔の実」と呼ばれる、超人的な能力が得られる果実が存在します！<br>
            いくつかの質問に答えるだけで、あなたにあった悪魔の実がわかるよ！！<br>
            ぜひ、あなたの診断結果の悪魔の実が作中どんな活躍をするかを、確認してみてください！！
			<br>
			<br>
			<img class="img01" src="../img/ゴムゴムの実.png" alt="ゴムゴムの実" >
			<br>
		  
		</span></p>
		    <style>
				button{
    			width: 500px;
   				height: 150px;
				font-size: 50px;
				background-color: red;
    			color: white;
  				}
            </style>
		<button style="display:block; margin: 0 auto;" onclick="startDiagnostic()">診断をスタートする</button>
       
	</div>
    
	<div id="question1" style="display:none; text-align: center;">
		<p>あなたは明日、久しぶりの休日ですがなんの予定もありません。<br>日々の疲労を回復するため、
		どこかに出掛けようとしています。どこに出掛けますか？<br><br>[ 質問1 ]</p>
		<label><input type="radio" id="answer1-A" name="answer1" value="A">
		選択肢A：綺麗な景色を見に行く　　　　　　　　　　　　　　</label><br>
		<label><input type="radio" id="answer1-B" name="answer1" value="B">
		選択肢B：動物園に行って、たくさんの動物と触れ合う　　　　</label><br>
		<label><input type="radio" id="answer1-C" name="answer1" value="C">
		選択肢C：マジックや超能力を見ることができる舞台を見に行く</label><br><br>
		<style>
			p {
			  text-align: center;
			  font-family: "Times New Roman", Times, serif;
			  font-size: 40px;
			}
			button{
			width: 500px;
			   height: 150px;
			font-size: 50px;
			background-color: red;
			color: rgb(252, 248, 9);
			  }
		</style>
		<button onclick="goToQuestion2()">次へ</button>
	</div>  

	<div id="question2.1" style="display:none; text-align: center;">
		<p>質問2：好きな色は何ですか？</p>
		<label><input type="radio" id="answer2-red" name="answer2" value="red">
		赤</label><br>
		<label><input type="radio" id="answer2-blue" name="answer2" value="blue">
		青</label><br><br>
		<nobr>
			<button onclick="goToResult()">結果を見る</button>
		    <button onclick="backToQuestion1()">戻る</button>
	    </nobr>
		
    </div>

	<div id="question2.2" style="display:none; text-align: center;">
		<p>質問2：好きな色は何ですか？</p>
		<label><input type="radio" id="answer2-red" name="answer2" value="red">
		赤</label><br>
		<label><input type="radio" id="answer2-blue" name="answer2" value="blue">
		青</label><br><br>
		<nobr>
			<button onclick="goToResult()">結果を見る</button>
		    <button onclick="backToQuestion1()">戻る</button>
	    </nobr>
		
    </div>

	<div id="question2.3" style="display:none; text-align: center;">
		<p>質問2：好きな色は何ですか？</p>
		<label><input type="radio" id="answer2-red" name="answer2" value="red">
		赤</label><br>
		<label><input type="radio" id="answer2-blue" name="answer2" value="blue">
		青</label><br><br>
		<nobr>
			<button onclick="goToResult()">結果を見る</button>
		    <button onclick="backToQuestion1()">戻る</button>
	    </nobr>
		
    </div>

	<div id="result" style="display:none;">
		<p id="result-text"></p>
		<button onclick="startOver()">最初からやり直す</button>
	</div>
	
	<script>
		

		//背景色読み込み
		document.addEventListener("DOMContentLoaded", function() {
          var storedColor = localStorage.getItem('backgroundColor');
          if (storedColor) {
            document.body.style.backgroundColor = storedColor;
          }
        });

		function goBack() {
            window.history.back();
        }

        // ページが読み込まれた時に選択された画像を表示する
		window.onload = function() {
      	  var queryString = window.location.search;
      	  var urlParams = new URLSearchParams(queryString);
      	  var selectedImage = urlParams.get('image');
      	  var imgElement = document.getElementById("selectedImage");
      	  imgElement.src = selectedImage;
		}


         function startDiagnostic() {
            // スタート画面を非表示にし、質問1を表示する
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("question1").style.display = "block";
        }

        function backToStart() {
            // 質問1と戻るボタンを非表示にし、スタート画面を表示する
            document.getElementById("start-screen").style.display = "block";
            document.getElementById("question1").style.display = "none";
            document.getElementById("result").style.display = "none";
        }

		function goToQuestion2() {
			// 質問1の回答を取得
			var answer1 = document.querySelector('input[name="answer1"]:checked').value;
			// 質問1の回答をセッションストレージに保存
			sessionStorage.setItem("answer1", answer1);
			// 質問1を非表示にして、質問2を表示する
			document.getElementById("question1").style.display = "none";
			document.getElementById("question2.1").style.display = "block";
		}
		
		function goToResult() {
			// 質問2の回答を取得
			var answer2 = document.querySelector('input[name="answer2"]:checked').value;
			// 質問1の回答をセッションストレージから取得
			var answer1 = sessionStorage.getItem("answer1");
			// 診断結果を作成
			var resultText = "あなたは";
			if (answer1 === "A") {
				resultText += "ロギア系";
            } else if (answer1 === "B") {
				resultText += "パラミシア系";
			} else {
			    resultText += "ゾオン系";
			}
				
			
			resultText += "で、好きな色は";
			if (answer2 === "red") {
				resultText += "赤";
			} else {
				resultText += "青";
			}
			resultText += "です。";
			// 診断結果を表示
			document.getElementById("result-text").innerHTML = resultText;
			// 質問2と戻るボタンを非表示にし、結果を表示する
			document.getElementById("question2.1").style.display = "none";
			document.getElementById("question1").style.display = "none";
			document.getElementById("result").style.display = "block";
		}
		
		function backToQuestion1() {
			// 質問1と戻るボタンを表示し、質問2を非表示にする
			document.getElementById("question1").style.display = "block";
			document.getElementById("question2.1").style.display = "none";
			document.getElementById("result").style.display = "none";
		}
		
		function startOver() {
			// セッションストレージをクリアして、最初の質問に戻る
			sessionStorage.clear();
			backToQuestion1();
		}

	</script>
			
</body>
